<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>ğŸ˜</title>
<style>
  html,body { height:100%; margin:0; background:black; }
  .wrap {
    position:relative;
    width:100%;
    height:100vh;
    overflow:hidden;
    display:flex;
    justify-content:center;
    align-items:center;
  }
  canvas {
    position:absolute;
    left:0;
    top:0;
    width:100%;
    height:100%;
    display:block;
  }
  /* ØªØ±ØªÙŠØ¨ Ø§Ù„Ø·Ø¨Ù‚Ø§Øª: Ø§Ù„Ø®Ù„ÙÙŠØ© ØªØ­ØªØŒ Ø§Ù„Ù‚Ù„Ø¨ ÙÙˆÙ‚ */
  #bgCanvas { z-index:1; }
  #heartCanvas { z-index:2; pointer-events:none; } /* pointer-events none Ø­ØªÙ‰ Ù„Ø§ ØªØ¹Ø·Ù„ Ø§Ù„Ù†Ù‚Ø±Ø§Øª */
</style>
</head>
<body>
<div class="wrap">
  <canvas id="bgCanvas"></canvas>
  <canvas id="heartCanvas"></canvas>
</div>

<script>
/* ================= Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„ÙƒØ§Ù†ÙØ§Ø³Ø§Øª ÙˆØ§Ù„Ù‚ÙŠØ§Ø³Ø§Øª ================= */
const bgCanvas = document.getElementById('bgCanvas');
const heartCanvas = document.getElementById('heartCanvas');
const bgCtx = bgCanvas.getContext('2d');
const ctx = heartCanvas.getContext('2d');

function resizeAll(){
  const w = window.innerWidth;
  const h = window.innerHeight;
  [bgCanvas, heartCanvas].forEach(c=>{
    c.width = w;
    c.height = h;
  });
  centerX = Math.round(w/2);
  centerY = Math.round(h/2);
}
window.addEventListener('resize', resizeAll);

let centerX = window.innerWidth/2;
let centerY = window.innerHeight/2;
resizeAll();

/* ================= Ù…Ø¹Ø§Ø¯Ù„Ø§Øª Ø§Ù„Ù‚Ù„Ø¨ Ø§Ù„ÙƒØ¨ÙŠØ±Ø© ================= */
function heartX(k){ return 15 * Math.pow(Math.sin(k), 3); }
function heartY(k){ return 12 * Math.cos(k) - 5 * Math.cos(2*k) - 2 * Math.cos(3*k) - Math.cos(4*k); }

/* ================= Ù‚Ù„ÙˆØ¨/Ù†Ø¬ÙˆÙ… Ø§Ù„ÙØ¶Ø§Ø¡ (Ø§Ù„Ø®Ù„ÙÙŠØ© 3D) ================= */
const spaceHearts = [];
const SPACE_COUNT = 140;
function initSpace(){
  spaceHearts.length = 0;
  for (let j=0;j<SPACE_COUNT;j++){
    spaceHearts.push({
      x: Math.random() * bgCanvas.width,
      y: Math.random() * bgCanvas.height,
      z: Math.random() * 3 + 0.5, // Ø¹Ù…Ù‚
      hue: Math.random() * 360,
      sizeBase: 0.6 + Math.random() * 1.8,
      vx: 0,
      vy: 0
    });
  }
}
initSpace();

function drawSpaceBackground(){
  // Ù†Ù…Ø³Ø­ Ø®Ù„ÙÙŠØ© ÙƒÙ„ ÙØ±ÙŠÙ…
  bgCtx.clearRect(0,0,bgCanvas.width,bgCanvas.height);

  // Ù†Ø±Ø³Ù… Ø³Ù…Ø§Ø¡ Ù…Ù† Ù†Ù‚Ø§Ø·/Ù‚Ù„ÙˆØ¨ ØµØºÙŠØ±Ø© (ØªØªØ­Ø±Ùƒ Ù„Ø£Ø³ÙÙ„ Ø¨Ø­Ø³Ø¨ Ø§Ù„Ø¹Ù…Ù‚)
  for (let h of spaceHearts){
    // ØªÙØ§Ø¹Ù„ Ù…Ø¹ Ø§Ù„Ù…Ø§ÙˆØ³: Ø¯ÙØ¹ Ø§Ù„Ù†Ø¬ÙˆÙ… Ø¨Ø¹ÙŠØ¯Ù‹Ø§ Ø¹Ù†Ø¯ Ø§Ù„Ø§Ù‚ØªØ±Ø§Ø¨
    const mx = mouse.x, my = mouse.y;
    if (mx !== null && my !== null){
      const dx = h.x - mx;
      const dy = h.y - my;
      const dist = Math.sqrt(dx*dx + dy*dy);
      const threshold = 120 * h.z; // Ù…Ø¯Ù‰ Ø§Ù„ØªÙØ§Ø¹Ù„ ÙŠØªØ£Ø«Ø± Ø¨Ø§Ù„Ø¹Ù…Ù‚
      if (dist < threshold && dist > 0){
        const force = (threshold - dist) / threshold * 6; // Ù‚ÙˆØ© Ø¯ÙØ¹
        h.vx += (dx / dist) * force;
        h.vy += (dy / dist) * force;
      }
    }

    // Ø§Ù„Ø­Ø±ÙƒØ© Ù…Ø¹ Ø§Ù„Ø§Ø­ØªÙØ§Ø¸ Ø¨Ø§Ù„Ø³Ø±Ø¹Ø© ÙˆØ§Ù„Ø²Ù…Ù†
    h.vx *= 0.92;
    h.vy *= 0.92;
    h.x += h.vx;
    h.y += h.vy + 0.4 * h.z; // Ø­Ø±ÙƒØ© Ù‡Ø¨ÙˆØ·ÙŠØ©

    // Ø¥Ø¹Ø§Ø¯Ø© ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ù†Ø¬Ù…/Ø§Ù„Ù‚Ù„Ø¨ Ù„Ùˆ Ø®Ø±Ø¬ Ù…Ù† Ø§Ù„Ø´Ø§Ø´Ø©
    if (h.y > bgCanvas.height + 20 || h.x < -50 || h.x > bgCanvas.width + 50){
      h.y = -10 - Math.random()*50;
      h.x = Math.random() * bgCanvas.width;
      h.z = Math.random() * 3 + 0.5;
      h.hue = Math.random() * 360;
      h.vx = 0; h.vy = 0;
    }

    const r = h.sizeBase * h.z;
    // Ù†Ø±Ø³Ù… Ù‚Ù„ÙˆØ¨ (Emoji) Ø¨Ø¯Ù„Ù‹Ø§ Ù…Ù† Ø¯ÙˆØ§Ø¦Ø± Ù„ØªØ­Ù‚ÙŠÙ‚ Ø§Ù„Ø´ÙƒÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨
    bgCtx.fillStyle = `hsl(${h.hue}, 90%, 60%)`;
    bgCtx.textAlign = 'center';
    bgCtx.textBaseline = 'middle';
    // Ø­Ø¬Ù… Ø§Ù„Ø®Ø· ÙŠØªÙ†Ø§Ø³Ø¨ Ù…Ø¹ "Ø§Ù„Ø¹Ù…Ù‚"
    bgCtx.font = `${Math.max(8, Math.round(r * 8))}px serif`;
    bgCtx.fillText('â¤', h.x, h.y);
  }
}

// ØªØªØ¨Ø¹ Ø§Ù„Ù…Ø§ÙˆØ³ Ù„Ø¨Ù†Ø§Ø¡ ØªØ£Ø«ÙŠØ± Ø§Ù„ØªÙØ§Ø¹Ù„
const mouse = { x: null, y: null };
window.addEventListener('mousemove', (e)=>{
  mouse.x = e.clientX;
  mouse.y = e.clientY;
});

/* ================= Ø±Ø³Ù… Ø§Ù„Ù‚Ù„Ø¨ ØªØ¯Ø±ÙŠØ¬ÙŠÙ‹Ø§ (Ø«Ø§Ø¨Øª Ø¹Ù„Ù‰ ÙƒØ§Ù†ÙØ§Ø³ Ø¹Ù„ÙˆÙŠ) ================= */
let stepI = 0;
let prevX = null, prevY = null;
const heartPoints = []; // Ù„ØªØ®Ø²ÙŠÙ† Ù†Ù‚Ø§Ø· Ø§Ù„Ù‚Ù„Ø¨ Ù„Ù„Ø±Ø³Ù… ÙˆØ§Ù„Ù†Ø¨Ø¶ Ù„Ø§Ø­Ù‚Ù‹Ø§
let isPulsing = false;
const scale = 20;
const numSteps = 3500; // Ø¹Ø¯Ø¯ Ø§Ù„Ø®Ø·ÙˆØ§Øª (ÙŠÙ…ÙƒÙ† ØªØºÙŠÙŠØ±Ù‡)

function drawHeartStep(){
  // Ù„Ø§ Ù†Ù…Ø³Ø­ ÙƒØ§Ù†ÙØ§Ø³ Ø§Ù„Ù‚Ù„Ø¨ â€” Ø­ØªÙ‰ ØªØ¨Ù‚Ù‰ Ø§Ù„Ø®Ø·ÙˆØ· Ø§Ù„Ø³Ø§Ø¨Ù‚Ø© Ù…ØªØ¬Ù…Ø¹Ø© (persistent)
  // ÙÙ‚Ø· Ù†Ø±Ø³Ù… Ø®Ø·ÙˆØ© Ø¬Ø¯ÙŠØ¯Ø© Ù…Ù† Ø§Ù„Ù‚Ù„Ø¨
  const t = stepI;
  const x = heartX(t) * scale + centerX;
  const y = -heartY(t) * scale + centerY;

  const hue = (t / numSteps) * 360;
  ctx.strokeStyle = `hsl(${hue}, 100%, 50%)`;
  ctx.lineWidth = 2;

  if (prevX !== null && prevY !== null){
    ctx.beginPath();
    ctx.moveTo(prevX, prevY);
    ctx.lineTo(x, y);
    // ØªÙˆÙ‡Ø¬ Ø¨Ø³ÙŠØ· Ù„Ù„Ù‚Ù„Ø¨
    ctx.shadowColor = ctx.strokeStyle;
    ctx.shadowBlur = 15;
    ctx.stroke();
    // Ø£Ø·ÙØ¦ Ø§Ù„Ø¸Ù„ Ø¨Ø¹Ø¯ Ø§Ù„Ø±Ø³Ù… Ù„Ø¹Ø¯Ù… ØªØ£Ø«ÙŠØ±Ù‡ Ø¹Ù„Ù‰ Ø±Ø³ÙˆÙ…Ø§Øª Ø£Ø®Ø±Ù‰
    ctx.shadowBlur = 0;
  }
  // Ø®Ø²Ù‘Ù† Ø§Ù„Ù†Ù‚Ø·Ø© Ø¨Ø§Ù„Ù†Ø³Ø¨Ø© Ù„Ù„Ù…Ø±ÙƒØ² Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…Ù‡Ø§ ÙÙŠ Ù†Ø¨Ø¶ Ø§Ù„Ù‚Ù„Ø¨ Ù„Ø§Ø­Ù‚Ù‹Ø§
  heartPoints.push({ dx: x - centerX, dy: y - centerY, hue });
  prevX = x; prevY = y;
  stepI++;

  // Ù†ÙƒÙ…Ù„ Ø­ØªÙ‰ Ù†ØµÙ„ Ù„Ù„Ù†Ù‡Ø§ÙŠØ©Ø› ÙˆØ¥Ù„Ø§ Ù†Ù‚Ù
  if (stepI < numSteps){
    requestAnimationFrame(drawHeartStep);
  } else {
    // Ø¹Ù†Ø¯ Ø§ÙƒØªÙ…Ø§Ù„ Ø§Ù„Ø±Ø³Ù…ØŒ Ù†Ø¨Ø¯Ø£ ØªØ£Ø«ÙŠØ± Ø§Ù„Ù†Ø¨Ø¶ Ø§Ù„Ù…Ø³ØªÙ…Ø±
    isPulsing = true;
    pulseHeart();
  }
}

function pulseHeart(){
  if (!isPulsing) return;
  // Ù†Ù…Ø³Ø­ ÙƒØ§Ù†ÙØ§Ø³ Ø§Ù„Ù‚Ù„Ø¨ Ø«Ù… Ù†Ø¹ÙŠØ¯ Ø±Ø³Ù… Ø§Ù„Ù…Ø³Ø§Ø± ÙƒØ§Ù…Ù„Ø§Ù‹ Ù…Ø¹ Ù…Ù‚ÙŠØ§Ø³ ØµØºÙŠØ± Ù…ØªØºÙŠØ±
  ctx.clearRect(0,0,heartCanvas.width, heartCanvas.height);

  const time = Date.now();
  const s = 1 + 0.03 * Math.sin(time / 160);

  ctx.save();
  ctx.translate(centerX, centerY);
  ctx.scale(s, s);
  ctx.lineWidth = 2;

  // Ù†Ø±Ø³Ù… ÙƒÙ„ Ø§Ù„Ù‚Ø·Ø¹ ÙƒØ®Ø·ÙˆØ· Ù…ØªØªØ§Ø¨Ø¹Ø© Ù…Ø¹ ØªÙˆÙ‡Ø¬
  ctx.shadowBlur = 20;
  for (let i=1;i<heartPoints.length;i++){
    const a = heartPoints[i-1];
    const b = heartPoints[i];
    ctx.beginPath();
    ctx.moveTo(a.dx, a.dy);
    ctx.lineTo(b.dx, b.dy);
    ctx.strokeStyle = `hsl(${b.hue}, 100%, 50%)`;
    ctx.shadowColor = ctx.strokeStyle;
    ctx.stroke();
  }

  ctx.shadowBlur = 0;
  ctx.restore();

  requestAnimationFrame(pulseHeart);
}

/* ================= Ø­Ù„Ù‚Ø© Ø£Ù†ÙŠÙ…ÙŠØ´Ù† Ø§Ù„Ø®Ù„ÙÙŠØ© Ø§Ù„Ù…Ø³ØªÙ…Ø±Ø© ================= */
function animateBackground(){
  drawSpaceBackground();
  requestAnimationFrame(animateBackground);
}

/* ================= Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø±Ø³ÙˆÙ…Ø§Øª ================= */
animateBackground();  // Ø§Ù„Ø®Ù„ÙÙŠØ© ØªØ¨Ø¯Ø£ ÙÙˆØ±Ù‹Ø§ ÙˆØªØ³ØªÙ…Ø±
drawHeartStep();      // Ø§Ù„Ù‚Ù„Ø¨ ÙŠØ¨Ø¯Ø£ Ø¨Ø§Ù„ØªÙƒÙˆÙ‘Ù† ØªØ¯Ø±ÙŠØ¬ÙŠØ§Ù‹

/* ================= Ø¥Ø°Ø§ ØªÙ… ØªØºÙŠÙŠØ± Ø§Ù„Ø­Ø¬Ù… -> Ø£Ø¹Ø¯ ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù†Ø¬ÙˆÙ… ÙˆØ§Ù„Ø­Ø³Ø§Ø¨Ø§Øª ================= */
window.addEventListener('resize', ()=>{
  resizeAll();
  initSpace();
  // Ø¹Ù†Ø¯ ØªØºÙŠÙŠØ± Ø§Ù„Ø­Ø¬Ù… Ù†Ø¹ÙŠØ¯ ØªÙ‡ÙŠØ¦Ø© Ø±Ø³Ù… Ø§Ù„Ù‚Ù„Ø¨: Ù†Ù…Ø³Ø­ Ø§Ù„ÙƒØ§Ù†ÙØ§Ø³ Ø§Ù„Ø¹Ù„ÙˆÙŠØŒ Ù†Ø¹ÙŠØ¯ Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
  ctx.clearRect(0,0,heartCanvas.width, heartCanvas.height);
  stepI = 0;
  prevX = null; prevY = null;
  heartPoints.length = 0;
  isPulsing = false;
  // Ù†Ø¨Ø¯Ø£ Ø±Ø³Ù… Ø§Ù„Ù‚Ù„Ø¨ Ù…Ù† Ø¬Ø¯ÙŠØ¯
  drawHeartStep();
});
</script>
</body>
</html>

