<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>ğŸ˜</title>
<style>
  html,body { height:100%; margin:0; background:black; }
  .wrap {
    position:relative;
    width:100%;
    height:100vh;
    overflow:hidden;
    display:flex;
    justify-content:center;
    align-items:center;
  }
  canvas {
    position:absolute;
    left:0;
    top:0;
    width:100%;
    height:100%;
    display:block;
  }
  /* ØªØ±ØªÙŠØ¨ Ø§Ù„Ø·Ø¨Ù‚Ø§Øª: Ø§Ù„Ø®Ù„ÙÙŠØ© ØªØ­ØªØŒ Ø§Ù„Ù‚Ù„Ø¨ ÙÙˆÙ‚ */
  #bgCanvas { z-index:1; }
  #heartCanvas { z-index:2; pointer-events:none; } /* pointer-events none Ø­ØªÙ‰ Ù„Ø§ ØªØ¹Ø·Ù„ Ø§Ù„Ù†Ù‚Ø±Ø§Øª */
</style>
</head>
<body>
<div class="wrap">
  <canvas id="bgCanvas"></canvas>
  <canvas id="heartCanvas"></canvas>
</div>

<script>
/* ================= Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„ÙƒØ§Ù†ÙØ§Ø³Ø§Øª ÙˆØ§Ù„Ù‚ÙŠØ§Ø³Ø§Øª ================= */
const bgCanvas = document.getElementById('bgCanvas');
const heartCanvas = document.getElementById('heartCanvas');
const bgCtx = bgCanvas.getContext('2d');
const ctx = heartCanvas.getContext('2d');

function resizeAll(){
  const w = window.innerWidth;
  const h = window.innerHeight;
  [bgCanvas, heartCanvas].forEach(c=>{
    c.width = w;
    c.height = h;
  });
  centerX = Math.round(w/2);
  centerY = Math.round(h/2);
}
window.addEventListener('resize', resizeAll);

let centerX = window.innerWidth/2;
let centerY = window.innerHeight/2;
resizeAll();

/* ================= Ù…Ø¹Ø§Ø¯Ù„Ø§Øª Ø§Ù„Ù‚Ù„Ø¨ Ø§Ù„ÙƒØ¨ÙŠØ±Ø© ================= */
function heartX(k){ return 15 * Math.pow(Math.sin(k), 3); }
function heartY(k){ return 12 * Math.cos(k) - 5 * Math.cos(2*k) - 2 * Math.cos(3*k) - Math.cos(4*k); }

/* ================= Ù‚Ù„ÙˆØ¨/Ù†Ø¬ÙˆÙ… Ø§Ù„ÙØ¶Ø§Ø¡ (Ø§Ù„Ø®Ù„ÙÙŠØ© 3D) ================= */
const spaceHearts = [];
const SPACE_COUNT = 140;
function initSpace(){
  spaceHearts.length = 0;
  for (let j=0;j<SPACE_COUNT;j++){
    spaceHearts.push({
      x: Math.random() * bgCanvas.width,
      y: Math.random() * bgCanvas.height,
      z: Math.random() * 3 + 0.5, // Ø¹Ù…Ù‚
      hue: Math.random() * 360,
      sizeBase: 0.6 + Math.random() * 1.8
    });
  }
}
initSpace();

function drawSpaceBackground(){
  // Ù†Ù…Ø³Ø­ Ø®Ù„ÙÙŠØ© ÙƒÙ„ ÙØ±ÙŠÙ…
  bgCtx.clearRect(0,0,bgCanvas.width,bgCanvas.height);

  // Ù†Ø±Ø³Ù… Ø³Ù…Ø§Ø¡ Ù…Ù† Ù†Ù‚Ø§Ø·/Ù‚Ù„ÙˆØ¨ ØµØºÙŠØ±Ø© (ØªØªØ­Ø±Ùƒ Ù„Ø£Ø³ÙÙ„ Ø¨Ø­Ø³Ø¨ Ø§Ù„Ø¹Ù…Ù‚)
  for (let h of spaceHearts){
    h.y += 0.4 * h.z; // ÙƒÙ„Ù…Ø§ z Ø£ÙƒØ¨Ø± ØªØªØ­Ø±Ùƒ Ø£Ø³Ø±Ø¹ (Ø¥Ø­Ø³Ø§Ø³ Ø¨Ø§Ù„Ø¹Ù…Ù‚)

    if (h.y > bgCanvas.height + 10){
      h.y = -10;
      h.x = Math.random() * bgCanvas.width;
      h.z = Math.random() * 3 + 0.5;
      h.hue = Math.random() * 360;
    }

    const r = h.sizeBase * h.z;
    bgCtx.beginPath();
    // Ù†Ø±Ø³Ù… Ø¯ÙˆØ§Ø¦Ø± Ø¨Ø³ÙŠØ·Ø© (Ù„Ùˆ Ø¹Ø§ÙŠØ² Ø´ÙƒÙ„ Ù‚Ù„Ø¨ ØµØºÙŠØ± Ø±ÙØ®Ù‘Øµ Ø¯Ù‡ Ù…Ù…ÙƒÙ† ÙŠØ¹Ø§Ø¯)
    bgCtx.fillStyle = `hsl(${h.hue}, 90%, 60%)`;
    bgCtx.arc(h.x, h.y, r, 0, Math.PI*2);
    bgCtx.fill();
  }
}

/* ================= Ø±Ø³Ù… Ø§Ù„Ù‚Ù„Ø¨ ØªØ¯Ø±ÙŠØ¬ÙŠÙ‹Ø§ (Ø«Ø§Ø¨Øª Ø¹Ù„Ù‰ ÙƒØ§Ù†ÙØ§Ø³ Ø¹Ù„ÙˆÙŠ) ================= */
let stepI = 0;
let prevX = null, prevY = null;
const scale = 20;
const numSteps = 3500; // Ø¹Ø¯Ø¯ Ø§Ù„Ø®Ø·ÙˆØ§Øª (ÙŠÙ…ÙƒÙ† ØªØºÙŠÙŠØ±Ù‡)

function drawHeartStep(){
  // Ù„Ø§ Ù†Ù…Ø³Ø­ ÙƒØ§Ù†ÙØ§Ø³ Ø§Ù„Ù‚Ù„Ø¨ â€” Ø­ØªÙ‰ ØªØ¨Ù‚Ù‰ Ø§Ù„Ø®Ø·ÙˆØ· Ø§Ù„Ø³Ø§Ø¨Ù‚Ø© Ù…ØªØ¬Ù…Ø¹Ø© (persistent)
  // ÙÙ‚Ø· Ù†Ø±Ø³Ù… Ø®Ø·ÙˆØ© Ø¬Ø¯ÙŠØ¯Ø© Ù…Ù† Ø§Ù„Ù‚Ù„Ø¨
  const t = stepI;
  const x = heartX(t) * scale + centerX;
  const y = -heartY(t) * scale + centerY;

  const hue = (t / numSteps) * 360;
  ctx.strokeStyle = `hsl(${hue}, 100%, 50%)`;
  ctx.lineWidth = 2;

  if (prevX !== null && prevY !== null){
    ctx.beginPath();
    ctx.moveTo(prevX, prevY);
    ctx.lineTo(x, y);
    ctx.stroke();
  }
  prevX = x; prevY = y;
  stepI++;

  // Ù†ÙƒÙ…Ù„ Ø­ØªÙ‰ Ù†ØµÙ„ Ù„Ù„Ù†Ù‡Ø§ÙŠØ©Ø› ÙˆØ¥Ù„Ø§ Ù†Ù‚Ù
  if (stepI < numSteps){
    requestAnimationFrame(drawHeartStep);
  } else {
    // Ø§Ø®ØªÙŠØ§Ø±ÙŠ: Ø¹Ù…Ù„ ÙˆÙ…ÙŠØ¶ Ù†Ù‡Ø§Ø¦ÙŠ Ø£Ùˆ ØªÙƒÙ…Ù„Ø© ØªÙØ£Ø«ÙŠØ± Ø¨Ø¹Ø¯ Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡
    // Ù‡Ù†Ø§ Ù†ØªØ±Ùƒ Ø§Ù„Ø®Ù„ÙÙŠØ© ØªØ¹Ù…Ù„ ÙˆØ­Ø¯Ù‡Ø§ (Ø§Ù„Ø®Ù„ÙÙŠØ© ØªÙØ­Ø¯Ù‘Ø« ÙÙŠ Ø­Ù„Ù‚Ø© Ù…Ø³ØªÙ‚Ù„Ø© Ø£Ø¯Ù†Ø§Ù‡)
  }
}

/* ================= Ø­Ù„Ù‚Ø© Ø£Ù†ÙŠÙ…ÙŠØ´Ù† Ø§Ù„Ø®Ù„ÙÙŠØ© Ø§Ù„Ù…Ø³ØªÙ…Ø±Ø© ================= */
function animateBackground(){
  drawSpaceBackground();
  requestAnimationFrame(animateBackground);
}

/* ================= Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø±Ø³ÙˆÙ…Ø§Øª ================= */
animateBackground();  // Ø§Ù„Ø®Ù„ÙÙŠØ© ØªØ¨Ø¯Ø£ ÙÙˆØ±Ù‹Ø§ ÙˆØªØ³ØªÙ…Ø±
drawHeartStep();      // Ø§Ù„Ù‚Ù„Ø¨ ÙŠØ¨Ø¯Ø£ Ø¨Ø§Ù„ØªÙƒÙˆÙ‘Ù† ØªØ¯Ø±ÙŠØ¬ÙŠØ§Ù‹

/* ================= Ø¥Ø°Ø§ ØªÙ… ØªØºÙŠÙŠØ± Ø§Ù„Ø­Ø¬Ù… -> Ø£Ø¹Ø¯ ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù†Ø¬ÙˆÙ… ÙˆØ§Ù„Ø­Ø³Ø§Ø¨Ø§Øª ================= */
window.addEventListener('resize', ()=>{
  resizeAll();
  initSpace();
  // Ù„Ø§ Ù†Ù…Ø³Ø­ ÙƒØ§Ù†ÙØ§Ø³ Ø§Ù„Ù‚Ù„Ø¨ Ù‡Ù†Ø§ Ù„Ø£Ù†Ù†Ø§ Ù†Ø±ÙŠØ¯ Ø§Ù„Ù‚Ù„Ø¨ ÙŠØ¨Ù‚Ù‰Ø› Ù„ÙƒÙ† Ø¨Ø¹Ø¯ ØªØºÙŠÙŠØ± Ø§Ù„Ø­Ø¬Ù…ØŒ Ù‚Ø¯ ØªØ±ØºØ¨ ØªÙ…Ø³Ø­Ù‡ ÙˆØªØ¹ÙŠØ¯ Ø±Ø³Ù…Ù‡
  // Ù„Ùˆ Ø­Ø§Ø¨Ø¨ Ø£Ø¹ÙŠØ¯ Ø±Ø³Ù… Ø§Ù„Ù‚Ù„Ø¨ Ø¨Ø´ÙƒÙ„ Ù…ØªÙ†Ø§Ø³Ø¨ Ø¨Ø¹Ø¯ Ø§Ù„Ø±ÙŠØ¯Ø³Ø§ÙŠØ² Ø£Ù‚Ø¯Ø± Ø£Ø¹Ù…Ù„Ù‡ Ù„Ùˆ Ø·Ù„Ø¨Øª
});
</script>
</body>
</html>

